<html>
  <head>

    <script src="js/openseadragon.min.js"></script>
    <script src="js/openseadragon-scalebar.js"></script>
    <script src="js/openseadragon-annotations.js"></script>

    <style>
      html, body { 
        background-color:#000;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden !important;  
      }

      #oviewer {
        width:  100%;
        height:  100%;
      }
    </style>

    <script>

      window.onload = function() {

        PIXEL_SIZE = 4.54e-7;

        viewer = OpenSeadragon({
          id: "viewer",
          showNavigator: true,
          prefixUrl: "https://openseadragon.github.io/openseadragon/images/",
          tileSources: ["W255B_0.dzi", "W255B_1.dzi", "W255B_2.dzi"],
          sequenceMode: true,

        });

        viewer.scalebar({
            type: OpenSeadragon.ScalebarType.MICROSCOPY,
            pixelsPerMeter: 1/PIXEL_SIZE,
            minWidth: "75px",
            location: OpenSeadragon.ScalebarLocation.BOTTOM_RIGHT,
            xOffset: 5,
            yOffset: 10,
            stayInsideImage: true,
            color: "rgb(150, 150, 150)",
            fontColor: "rgb(100, 100, 100)",
            backgroundColor: "rgba(255, 255, 255, 0.5)",
            fontSize: "small",
            barThickness: 2
        });

        // viewer.initializeAnnotations()


        viewer.addHandler('canvas-click', function(event) {
          // The canvas-click event gives us a position in web coordinates.
          var webPoint = event.position;

          // Convert that to viewport coordinates, the lingua franca of OpenSeadragon coordinates.
          var viewportPoint = viewer.viewport.pointFromPixel(webPoint);

          // Convert from viewport coordinates to image coordinates.
          var imagePoint = viewer.viewport.viewportToImageCoordinates(viewportPoint);

          // Show the results.
          console.log(webPoint.toString(), viewportPoint.toString(), imagePoint.toString());

        });

      };

    </script>

  </head>

  <body>

    <div id='viewer'></div>

  </body>
</html>